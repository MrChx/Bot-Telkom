<!DOCTYPE html>
<html>
<head>
    <title>Panel Admin</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <h1>Panel Admin</h1>
    
    <div>
        <h2>Statistik Pengguna</h2>
        <p>Total Pengguna: {{ statistik.total_pengguna }}</p>
        <p>Total Admin: {{ statistik.total_admin }}</p>
    </div>

    <div>
        <h2>Tambah Pengguna Baru</h2>
        <form id="formTambahPengguna">
            <input type="text" name="username" placeholder="Username" required>
            <input type="password" name="password" placeholder="Password" required>
            <label>
                <input type="checkbox" name="is_admin"> Admin
            </label>
            <button type="submit">Tambah Pengguna</button>
        </form>
    </div>

    <div>
        <h2>Daftar Pengguna</h2>
        <table border="1">
            <thead>
                <tr>
                    <th>Username</th>
                    <th>Status Admin</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.username }}</td>
                    <td>{{ 'Admin' if user.is_admin else 'Pengguna' }}</td>
                    <td>
                        <button onclick="editUser('{{ user._id }}')">Edit</button>
                        <button onclick="hapusUser('{{ user._id }}')">Hapus</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <a href="/logout">Logout</a>

    <script>
        function editUser(userId) {
            // Modal edit pengguna (dapat dikembangkan lebih lanjut)
            alert('Fitur edit sedang dikembangkan');
        }

        function hapusUser(userId) {
            if(confirm('Yakin ingin menghapus pengguna?')) {
                axios.post(`/hapus_pengguna/${userId}`)
                    .then(response => {
                        if (response.data.berhasil) {
                            alert('Pengguna berhasil dihapus');
                            location.reload();
                        } else {
                            alert('Gagal menghapus pengguna');
                        }
                    });
            }
        }

        document.getElementById('formTambahPengguna').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            
            axios.post('/tambah_pengguna', formData)
                .then(response => {
                    if (response.data.berhasil) {
                        alert('Pengguna berhasil ditambahkan');
                        location.reload();